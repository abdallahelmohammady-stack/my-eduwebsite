<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CCE Hub - Ù…ÙƒØªØ¨Ø© Ø§Ù„Ù…ÙˆØ§Ø¯</title>
    <link rel="icon" href="favicone.png">
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts (Cairo) -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&display=swap" rel="stylesheet">

    <!-- Custom Styles from Original Component -->
    <style>
        :root {
            --bg-body: #f1f5f9;
            --bg-card: #ffffff;
            --bg-hover: #e0e7ff;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --primary: #4f46e5;
            --primary-dark: #3730a3;
            --accent: #06b6d4;
            --danger: #ef4444;
            --border-color: #cbd5e1;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
            --radius: 12px;
            --modal-bg: rgba(15, 23, 42, 0.6);
        }

        .dark-mode {
            --bg-body: #0f172a;
            --bg-card: #1e293b;
            --bg-hover: #334155;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --accent: #22d3ee;
            --danger: #f87171;
            --border-color: #334155;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3);
            --modal-bg: rgba(0, 0, 0, 0.8);
        }

        body {
            font-family: 'Cairo', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-body);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            transition: background-color 0.3s, color 0.3s;
            background-image: radial-gradient(var(--text-secondary) 1px, transparent 1px);
            background-size: 30px 30px;
        }

        /* Header Styles */
        header {
            position: sticky;
            top: 0;
            z-index: 1000;
            background: rgba(255,255,255,0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border-color);
            padding: 0.8rem 0;
            transition: 0.3s;
        }

        .dark-mode header {
            background: rgba(30, 41, 59, 0.9);
        }

        /* Card Styles */
        .material-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            padding: 2rem 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100%;
        }

        .material-card:hover {
            transform: translateY(-4px);
            border-color: var(--primary);
        }

        .material-card.dragging {
            opacity: 0.5;
            transform: scale(0.95);
            border: 2px dashed var(--primary);
        }

        .material-card.drag-over {
            border: 2px dashed var(--primary);
            background-color: var(--bg-hover);
        }

        /* Modal Styles (Replaces Shadcn Dialog) */
        [role="dialog"] {
            width: 100%;
            max-width: 700px !important;
            background: var(--bg-card);
            padding: 2rem !important;
            border-radius: 16px !important;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            outline: none;
            animation: modalFadeIn 0.2s ease-out;
        }

        @keyframes modalFadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

        .modal-backdrop {
            position: fixed;
            inset: 0;
            z-index: 50;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--modal-bg);
            backdrop-filter: blur(4px);
            padding: 1rem;
        }

        /* Utility Buttons & Inputs */
        .icon-btn {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-primary);
            cursor: pointer;
            transition: 0.3s;
        }

        .icon-btn:hover {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .form-input {
            width: 100%;
            padding: 0.85rem 1rem !important;
            border-radius: 10px !important;
            border: 2px solid var(--border-color) !important;
            background: var(--bg-body) !important;
            color: var(--text-primary) !important;
            font-size: 1rem !important;
            font-weight: 500 !important;
            transition: 0.2s;
            min-height: 48px;
        }

        .form-input:focus {
            border-color: var(--primary) !important;
            outline: none !important;
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.15) !important;
        }

        /* Specific Classes from original CSS */
        .search-input {
            width: 100%;
            padding: 0.6rem 2.5rem 0.6rem 1rem;
            background: var(--bg-card);
            border: 2px solid transparent;
            border-radius: var(--radius);
            color: var(--text-primary);
            font-weight: 600;
            transition: 0.3s;
        }

        .search-input:focus {
            border-color: var(--primary);
        }

        .action-btn {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            width: 28px;
            height: 28px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--text-secondary);
            font-size: 0.8rem;
        }

        .action-btn:hover {
            color: var(--primary);
            border-color: var(--primary);
        }
        
        .action-btn.delete:hover {
            color: var(--danger);
            border-color: var(--danger);
        }

        .track-item {
            display: flex;
            align-items: center;
            padding: 0.7rem 1rem;
            border-bottom: 1px solid var(--border-color);
            text-decoration: none;
            color: var(--text-primary);
            transition: 0.2s;
            cursor: pointer;
        }
        
        .track-item:hover {
            background-color: var(--bg-hover);
            padding-right: 1.2rem;
        }

        /* Standard Buttons */
        .btn-save {
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.85rem 2.5rem;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 700;
            transition: 0.2s;
            min-height: 48px;
        }
        
        .btn-save:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3);
        }

        .btn-cancel {
            background: transparent;
            border: 2px solid var(--border-color);
            color: var(--text-secondary);
            padding: 0.85rem 2rem;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: 0.2s;
            min-height: 48px;
        }

        .btn-cancel:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
            border-color: var(--text-secondary);
        }

        .btn-delete {
            background: var(--danger);
            color: white;
            border: none;
            padding: 0.85rem 2rem;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: 0.2s;
            min-height: 48px;
        }

        .btn-delete:hover {
            opacity: 0.9;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
        }

        .add-course-btn-main {
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: var(--radius);
            font-weight: 700;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            margin: 1rem auto;
            box-shadow: 0 4px 15px rgba(79, 70, 229, 0.3);
            transition: 0.3s;
        }
        
        .add-course-btn-main:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(79, 70, 229, 0.4);
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Default courses data
        const defaultCourses = [
            {
                id: 'math3',
                title: 'Ø±ÙŠØ§Ø¶Ø© 3 ğŸ« ',
                doc: 'D.E & S.V',
                icon: 'fa-calculator',
                sections: [
                    { name: 'Ø¯ÙƒØªÙˆØ± Ø´ÙŠÙ…Ø§Ø¡', badge: 'D.E & S.V', links: [
                        { name: 'Differential Equations', url: 'https://youtube.com/playlist?list=PLDmD18oSY9IDFBY-Cxwov0DdietQdPrwY' },
                        { name: 'S.V (Vector Analysis)', url: 'https://youtube.com/playlist?list=PLDmD18oSY9IBpm38QhF93VM-GeEGNiRKo' }
                    ]},
                    { name: 'Ø¯ÙƒØªÙˆØ± Ø¹Ø¨Ø§Ø³', badge: 'Course', links: [
                        { name: 'Playlist Ø´Ø§Ù…Ù„Ø©', url: 'https://youtube.com/playlist?list=PL1YWN9bMt3OBst07eIJhwj4U256qipeTz' }
                    ]},
                    { name: 'Ø¯ÙƒØªÙˆØ± Ù…ØµØ·ÙÙ‰ Ø§Ù„Ø¹Ø¬Ù…ÙŠ', badge: 'D.E', links: [
                        { name: 'Ø´Ø±Ø­ D.E', url: 'https://youtube.com/playlist?list=PLHAKO34XewLnaahap99m414ntoRGE0lxm' }
                    ]},
                    { name: 'Ø¯ÙƒØªÙˆØ± Ø£Ø­Ù…Ø¯ Ø¹Ø¨Ø¯ Ø§Ù„Ù„Ù‡', badge: 'S.V', links: [
                        { name: 'Ø´Ø±Ø­ S.V', url: 'https://youtube.com/playlist?list=PLIAuB242F-D6W0jxwDN_OAhXq7H9BhCiL' }
                    ]},
                    { name: 'Ø¯ÙƒØªÙˆØ± Ø£ÙŠÙ…Ù† Ø¬Ù…Ø¹Ø©', badge: 'General', links: [
                        { name: 'Playlist Ø´Ø§Ù…Ù„Ø©', url: 'https://youtube.com/playlist?list=PLtOK4NrEMJsli2gWGs18mdKoYov5MsO_f' }
                    ]},
                    { name: 'Ø¯ÙƒØªÙˆØ± Ù…Ø­Ù…Ø¯ Ø³Ø±ÙˆØ±', badge: 'D.E', links: [
                        { name: 'Ø´Ø±Ø­ D.E', url: 'https://youtube.com/playlist?list=PLfMrPi8g-0mO7SZ0_sCL0AetECNZY6jme' }
                    ]},
                    { name: 'Ø¯ÙƒØªÙˆØ± Ø³Ù…ÙŠØ± Ø´Ù…Ø³ Ø§Ù„Ø¯ÙŠÙ†', badge: 'S.V', links: [
                        { name: 'Ø´Ø±Ø­ S.V', url: 'https://youtube.com/playlist?list=PLfMrPi8g-0mMG-QqK_Xw1o2L1EvyFvRtm' }
                    ]}
                ]
            },
            {
                id: 'logic',
                title: 'Ù„ÙˆØ¬ÙŠÙƒ 1',
                doc: 'Digital Logic',
                icon: 'fa-microchip',
                sections: [
                    { name: 'Ø¯/ Ø£Ø­Ù…Ø¯ ØµØ§Ù„Ø­ ğŸ‘‘', badge: 'King', links: [
                        { name: 'Playlist 1', url: 'https://youtube.com/playlist?list=PL58RkuffQs13k6P5uItCg8nA0Hi3oU2TY' },
                        { name: 'Playlist 2', url: 'https://youtube.com/playlist?list=PLAP4TMOC6CLmThh4UyClRFk0UK5eH8msu' },
                        { name: 'Playlist 3', url: 'https://youtube.com/playlist?list=PLIw7pvqK09TvueRHzvgqFl4l-_MhoE3ep' }
                    ]}
                ]
            },
            {
                id: 'circuits',
                title: 'Ø¯ÙˆØ§Ø¦Ø± ÙƒÙ‡Ø±Ø¨ÙŠØ©',
                doc: 'Electrical Circuits',
                icon: 'fa-plug-circle-bolt',
                sections: [
                    { name: 'Ø¯ ÙŠØ§Ø³Ø± Ø§Ù„Ø¨Ø·Ø§ÙˆÙŠ', badge: 'YouTube', links: [
                        { name: 'Playlist Ø´Ø§Ù…Ù„Ø©', url: 'https://youtube.com/playlist?list=PLka1IWY71Cp_iANs3ir4JjB0bSg8lXTgH' }
                    ]},
                    { name: 'Ø¯. Ù…Ø­Ù…Ø¯ Ø¥Ø³Ù…Ø§Ø¹ÙŠÙ„', badge: 'AC/DC', links: [
                        { name: 'Ac/Dc 1', url: 'https://youtube.com/playlist?list=PLD30uL4tqplHfK5qBTtU01IARHkBQNiLL' },
                        { name: 'Ac/Dc 2', url: 'https://youtube.com/playlist?list=PLD30uL4tqplG81NNhEGDLiV4YMb3xYBEH' }
                    ]},
                    { name: 'StudyU', badge: 'Channel', links: [
                        { name: 'Ø´Ø±Ø­ Ø§Ù„Ø¯ÙˆØ§Ø¦Ø±', url: 'https://youtube.com/playlist?list=PLkzaiPofN5b1eqFW7wYH8DWx0fAnl3vn4' }
                    ]}
                ]
            },
            {
                id: 'electronics',
                title: 'Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª',
                doc: 'Electronics',
                icon: 'fa-memory',
                sections: [
                    { name: 'Ø¯/ Ù†ÙŠÙ‡Ø§Ù„', badge: 'Prof', links: [
                        { name: 'Playlist Ø´Ø§Ù…Ù„Ø©', url: 'https://youtube.com/playlist?list=PL3MBZqVIYGpnKfbDRv-WsSqkK_B67TbeQ' }
                    ]}
                ]
            },
            {
                id: 'prob',
                title: 'Ù†Ø¸Ø±ÙŠØ© Ø§Ø­ØªÙ…Ø§Ù„Ø§Øª',
                doc: 'Probability & Stats',
                icon: 'fa-chart-pie',
                sections: [
                    { name: 'Ù…Ù„ÙØ§Øª Ø§Ù„Ø¯ÙƒØªÙˆØ±', badge: 'Drive', links: [
                        { name: 'ÙØªØ­ Ø§Ù„Ù…Ø¬Ù„Ø¯', url: 'https://drive.google.com/drive/folders/1pKkvp1MY38gWNj8Xumpf5o6uvp6wk2M_' }
                    ]}
                ]
            },
            {
                id: 'exams',
                title: 'Ù…Ø³ØªÙˆØ¯Ø¹ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†Ø§Øª',
                doc: 'Archive',
                icon: 'fa-folder-open',
                sections: [
                    { name: 'Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†Ø§Øª Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©', badge: 'Exam', links: [
                        { name: 'ÙØªØ­ Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹', url: 'https://drive.google.com/folderview?id=1vr4h0p0mhFlJ4p12Vxm1urYIkMAKAG2q' }
                    ]}
                ]
            }
        ];

        function CCEHub() {
            const [allCourses, setAllCourses] = useState(() => {
                if (typeof window === 'undefined') return []
                const storedCourses = localStorage.getItem('allCourses')
                if (storedCourses) {
                    try {
                        const parsed = JSON.parse(storedCourses)
                        return parsed.length > 0 ? parsed : defaultCourses
                    } catch (e) {
                        return defaultCourses
                    }
                }
                return defaultCourses
            })
            const [currentCourseId, setCurrentCourseId] = useState(null)
            const [view, setView] = useState('home')
            const [searchTerm, setSearchTerm] = useState('')
            const [currentIconBase64, setCurrentIconBase64] = useState(null)
            const [theme, setTheme] = useState(() => {
                if (typeof window !== 'undefined') {
                    return (localStorage.getItem('theme')) || 'light'
                }
                return 'light'
            })

            // Modals state
            const [courseModalOpen, setCourseModalOpen] = useState(false)
            const [linkModalOpen, setLinkModalOpen] = useState(false)
            const [editLinkModalOpen, setEditLinkModalOpen] = useState(false)
            const [editingCourseId, setEditingCourseId] = useState(null)
            const [editingSectionIndex, setEditingSectionIndex] = useState(null)
            const [editingLinkIndex, setEditingLinkIndex] = useState(null)

            // Form state
            const [courseName, setCourseName] = useState('')
            const [courseDoc, setCourseDoc] = useState('')
            const [linkName, setLinkName] = useState('')
            const [linkUrl, setLinkUrl] = useState('')
            const [editLinkName, setEditLinkName] = useState('')
            const [editLinkUrl, setEditLinkUrl] = useState('')

            // Drag and drop state
            const [draggedLinkInfo, setDraggedLinkInfo] = useState(null)
            const [draggedCourseIndex, setDraggedCourseIndex] = useState(null)
            const [draggedSectionIndex, setDraggedSectionIndex] = useState(null)

            const fileInputRef = useRef(null)

            // Effects
            useEffect(() => {
                try {
                    localStorage.setItem('allCourses', JSON.stringify(allCourses))
                } catch (e) {
                    alert('ØªÙ†Ø¨ÙŠÙ‡: Ù…Ø³Ø§Ø­Ø© Ø§Ù„ØªØ®Ø²ÙŠÙ† Ù…Ù…ØªÙ„Ø¦Ø©. Ø­Ø§ÙˆÙ„ Ø­Ø°Ù Ø¨Ø¹Ø¶ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø£Ùˆ Ø§Ù„ØµÙˆØ± Ø§Ù„ÙƒØ¨ÙŠØ±Ø©.')
                }
            }, [allCourses])

            useEffect(() => {
                localStorage.setItem('theme', theme)
                // Apply class to body
                if(theme === 'dark') {
                    document.body.classList.add('dark-mode')
                } else {
                    document.body.classList.remove('dark-mode')
                }
            }, [theme])

            // Helpers
            const getIcon = (name) => {
                const n = name.toLowerCase()
                if (n.includes('Ø±ÙŠØ§Ø¶') || n.includes('math')) return 'fa-calculator'
                if (n.includes('ÙÙŠØ²') || n.includes('phys')) return 'fa-bolt'
                if (n.includes('Ø¯Ø§Ø¦Ø±') || n.includes('circ') || n.includes('ÙƒÙ‡Ø±Ø¨')) return 'fa-plug-circle-bolt'
                if (n.includes('Ø¥Ù„ÙƒØªØ±ÙˆÙ†') || n.includes('electr')) return 'fa-memory'
                if (n.includes('Ù„ÙˆØ¬ÙŠÙƒ') || n.includes('log') || n.includes('Ø¨Ø±Ù…Ø¬Ø©') || n.includes('prog')) return 'fa-microchip'
                if (n.includes('Ø§Ø­ØªÙ…Ø§Ù„') || n.includes('stat')) return 'fa-chart-pie'
                if (n.includes('Ø§Ù…ØªØ­Ø§Ù†') || n.includes('exam') || n.includes('Ù…ÙˆØ¯')) return 'fa-file-shield'
                return 'fa-book'
            }

            const toggleTheme = () => {
                setTheme(prev => prev === 'light' ? 'dark' : 'light')
            }

            const openCourseModal = () => {
                setEditingCourseId(null)
                setCurrentIconBase64(null)
                setCourseName('')
                setCourseDoc('')
                setCourseModalOpen(true)
            }

            const openEditCourseModal = (courseId) => {
                const course = allCourses.find(c => c.id === courseId)
                if (!course) return
                setEditingCourseId(courseId)
                setCurrentIconBase64(null)
                setCourseName(course.title)
                setCourseDoc(course.doc)
                setCourseModalOpen(true)
            }

            const saveCourseData = () => {
                if (!courseName.trim() || !courseDoc.trim()) {
                    alert('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„')
                    return
                }

                if (editingCourseId) {
                    setAllCourses(prev => prev.map(course => {
                        if (course.id === editingCourseId) {
                            return {
                                ...course,
                                title: courseName.trim(),
                                doc: courseDoc.trim(),
                                icon: currentIconBase64 || course.icon
                            }
                        }
                        return course
                    }))
                } else {
                    const newCourse = {
                        id: `course-${Date.now()}`,
                        title: courseName.trim(),
                        doc: courseDoc.trim(),
                        icon: currentIconBase64 || getIcon(courseName),
                        sections: []
                    }
                    setAllCourses(prev => [...prev, newCourse])
                }
                setCourseModalOpen(false)
            }

            const deleteCourse = (courseId) => {
                if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ø­Ø°ÙØŸ')) {
                    setAllCourses(prev => prev.filter(c => c.id !== courseId))
                    if (currentCourseId === courseId) {
                        showHome()
                    }
                }
            }

            const openDetail = (courseId) => {
                setCurrentCourseId(courseId)
                setView('detail')
            }

            const showHome = () => {
                setCurrentCourseId(null)
                setView('home')
            }

            const openLinkModal = () => {
                setLinkName('')
                setLinkUrl('')
                setLinkModalOpen(true)
            }

            const saveLinkData = () => {
                if (!linkName.trim() || !linkUrl.trim()) {
                    alert('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª')
                    return
                }

                setAllCourses(prev => prev.map(course => {
                    if (course.id === currentCourseId) {
                        return {
                            ...course,
                            sections: [
                                ...course.sections,
                                {
                                    name: `Ù‚Ø³Ù… Ø¬Ø¯ÙŠØ¯ ${course.sections.length + 1}`,
                                    badge: 'Ù…Ø¶Ø§Ù',
                                    links: [{ name: linkName.trim(), url: linkUrl.trim() }]
                                }
                            ]
                        }
                    }
                    return course
                }))
                setLinkModalOpen(false)
            }

            const deleteLink = (courseId, sectionIndex, linkIndex) => {
                if (confirm('Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø±Ø§Ø¨Ø·ØŸ')) {
                    setAllCourses(prev => prev.map(course => {
                        if (course.id === courseId) {
                            const newSections = [...course.sections]
                            newSections[sectionIndex].links.splice(linkIndex, 1)
                            if (newSections[sectionIndex].links.length === 0) {
                                newSections.splice(sectionIndex, 1)
                            }
                            return { ...course, sections: newSections }
                        }
                        return course
                    }))
                }
            }

            const openEditLinkModal = (courseId, sectionIndex, linkIndex) => {
                const course = allCourses.find(c => c.id === courseId)
                if (!course) return
                const link = course.sections[sectionIndex].links[linkIndex]
                setEditingCourseId(courseId)
                setEditingSectionIndex(sectionIndex)
                setEditingLinkIndex(linkIndex)
                setEditLinkName(link.name)
                setEditLinkUrl(link.url)
                setEditLinkModalOpen(true)
            }

            const saveEditedLink = () => {
                if (!editLinkName.trim() || !editLinkUrl.trim()) {
                    alert('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª')
                    return
                }
                if (editingCourseId !== null && editingSectionIndex !== null && editingLinkIndex !== null) {
                    setAllCourses(prev => prev.map(course => {
                        if (course.id === editingCourseId) {
                            const newSections = [...course.sections]
                            newSections[editingSectionIndex].links[editingLinkIndex] = {
                                name: editLinkName.trim(),
                                url: editLinkUrl.trim()
                            }
                            return { ...course, sections: newSections }
                        }
                        return course
                    }))
                }
                setEditLinkModalOpen(false)
            }

            const editSectionName = (courseId, sectionIndex) => {
                const course = allCourses.find(c => c.id === courseId)
                if (!course) return
                const newName = prompt('Ø£Ø¯Ø®Ù„ Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù„Ù„Ø®Ø§Ù†Ø©:', course.sections[sectionIndex].name)
                if (newName && newName.trim()) {
                    setAllCourses(prev => prev.map(course => {
                        if (course.id === courseId) {
                            const newSections = [...course.sections]
                            newSections[sectionIndex].name = newName.trim()
                            return { ...course, sections: newSections }
                        }
                        return course
                    }))
                }
            }

            const deleteSection = (courseId, sectionIndex) => {
                if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ø®Ø§Ù†Ø©ØŸ')) {
                    setAllCourses(prev => prev.map(course => {
                        if (course.id === courseId) {
                            const newSections = [...course.sections]
                            newSections.splice(sectionIndex, 1)
                            return { ...course, sections: newSections }
                        }
                        return course
                    }))
                }
            }

            // Drag & Drop Handlers
            const handleLinkDragStart = (e, sectionIndex, linkIndex) => {
                setDraggedLinkInfo({ sectionIndex, linkIndex })
                e.dataTransfer.effectAllowed = 'move'
            }

            const handleLinkDragOver = (e) => {
                e.preventDefault()
                e.dataTransfer.dropEffect = 'move'
            }

            const handleLinkDrop = (e, targetSectionIndex, targetLinkIndex) => {
                e.preventDefault()
                if (!draggedLinkInfo || !currentCourseId) return
                const { sectionIndex: sourceSectionIndex, linkIndex: sourceLinkIndex } = draggedLinkInfo

                if (sourceSectionIndex === targetSectionIndex && sourceLinkIndex === targetLinkIndex) {
                    setDraggedLinkInfo(null)
                    return
                }

                setAllCourses(prev => prev.map(course => {
                    if (course.id === currentCourseId) {
                        const newSections = [...course.sections]
                        const [draggedLink] = newSections[sourceSectionIndex].links.splice(sourceLinkIndex, 1)
                        newSections[targetSectionIndex].links.splice(targetLinkIndex, 0, draggedLink)
                        const filteredSections = newSections.filter(s => s.links.length > 0)
                        return { ...course, sections: filteredSections }
                    }
                    return course
                }))
                setDraggedLinkInfo(null)
            }

            const handleCourseDragStart = (e, courseIndex) => {
                setDraggedCourseIndex(courseIndex)
                e.dataTransfer.effectAllowed = 'move'
            }

            const handleCourseDragOver = (e) => {
                e.preventDefault()
                e.dataTransfer.dropEffect = 'move'
            }

            const handleCourseDrop = (e, targetIndex) => {
                e.preventDefault()
                if (draggedCourseIndex === null || draggedCourseIndex === targetIndex) {
                    setDraggedCourseIndex(null)
                    return
                }
                setAllCourses(prev => {
                    const newCourses = [...prev]
                    const [draggedCourse] = newCourses.splice(draggedCourseIndex, 1)
                    newCourses.splice(targetIndex, 0, draggedCourse)
                    return newCourses
                })
                setDraggedCourseIndex(null)
            }

            const handleSectionDragStart = (e, sectionIndex) => {
                setDraggedSectionIndex(sectionIndex)
                e.dataTransfer.effectAllowed = 'move'
            }

            const handleSectionDragOver = (e) => {
                e.preventDefault()
                e.dataTransfer.dropEffect = 'move'
            }

            const handleSectionDrop = (e, targetIndex) => {
                e.preventDefault()
                if (draggedSectionIndex === null || draggedSectionIndex === targetIndex) {
                    setDraggedSectionIndex(null)
                    return
                }
                setAllCourses(prev => prev.map(course => {
                    if (course.id === currentCourseId) {
                        const newSections = [...course.sections]
                        const [draggedSection] = newSections.splice(draggedSectionIndex, 1)
                        newSections.splice(targetIndex, 0, draggedSection)
                        return { ...course, sections: newSections }
                    }
                    return course
                }))
                setDraggedSectionIndex(null)
            }

            const handleImageUpload = (e) => {
                const file = e.target.files?.[0]
                if (file) {
                    if (file.type !== 'image/png') {
                        alert('ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù Ø¨ØµÙŠØºØ© PNG ÙÙ‚Ø·')
                        return
                    }
                    const reader = new FileReader()
                    reader.onload = (event) => {
                        setCurrentIconBase64(event.target?.result)
                    }
                    reader.readAsDataURL(file)
                }
            }

            const filteredCourses = allCourses.filter(course => {
                const term = searchTerm.toLowerCase()
                return course.title.toLowerCase().includes(term) || course.doc.toLowerCase().includes(term)
            })

            const currentCourse = allCourses.find(c => c.id === currentCourseId)

            return (
                <div className={`min-h-screen flex flex-col transition-colors duration-300 ${theme === 'dark' ? 'dark-mode' : ''}`}>
                    {/* Header */}
                    <header>
                        {/* Conditionally center header based on view if needed, but keeping standard for now */}
                        <div className={`${view === 'detail' ? 'max-w-full px-4 md:px-8' : 'max-w-6xl'} mx-auto flex justify-between items-center`}>
                            <div className="flex items-center gap-3 text-xl font-black text-[var(--primary-dark)] cursor-pointer" onClick={showHome}>
                                <i className="fa-solid fa-network-wired text-[var(--accent)]"></i> CCE Hub
                            </div>
                            
                            <div className="flex items-center gap-4">
                                <button className="icon-btn" onClick={toggleTheme} title="ØªØºÙŠÙŠØ± Ø§Ù„Ø«ÙŠÙ…">
                                    <i className={`fa-solid ${theme === 'light' ? 'fa-moon' : 'fa-sun'}`}></i>
                                </button>
                                <div className="relative w-full max-w-[280px]">
                                    <input
                                        type="text"
                                        className="search-input"
                                        placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø§Ø¯Ø©..."
                                        value={searchTerm}
                                        onChange={(e) => setSearchTerm(e.target.value)}
                                    />
                                    <i className="fa-solid fa-search absolute right-3 top-1/2 -translate-y-1/2 text-[var(--text-secondary)]"></i>
                                </div>
                            </div>
                        </div>
                    </header>

                    {/* THE CRITICAL CHANGE IS HERE IN THE MAIN TAG */}
                    {/* If 'detail', use 'w-full' (full width). If 'home', keep 'max-w-6xl' (centered). */}
                    <main className={`${view === 'detail' ? 'w-full px-4 md:px-8' : 'max-w-6xl'} mx-auto py-8 flex-1 min-h-[70vh]`}>
                        {/* Home View */}
                        {view === 'home' && (
                            <div>
                                <div className="text-center mb-8">
                                    <h1 className="text-3xl font-bold mb-2 text-[var(--text-primary)]">Ù…ÙƒØªØ¨Ø© Ù‚Ø³Ù… Ù‡Ù†Ø¯Ø³Ø© Ø§Ù„Ø¥ØªØµØ§Ù„Ø§Øª ÙˆØ§Ù„Ø­Ø§Ø³Ø¨Ø§Øª</h1>
                                    <p className="text-[var(--text-secondary)] text-sm">Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ÙˆØ­Ø¯ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙˆØ§Ø¯ (ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ ÙˆØ§Ù„Ø­Ø°Ù ÙˆØ¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ±ØªÙŠØ¨ Ø¹Ù„Ù‰ Ø£ÙŠ Ù…Ø§Ø¯Ø©)</p>
                                </div>

                                <div className="text-center">
                                    <button className="add-course-btn-main" onClick={openCourseModal}>
                                        <i className="fa-solid fa-plus-circle"></i> Ø¥Ø¶Ø§ÙØ© Ù…Ù‚Ø±Ø± Ø¬Ø¯ÙŠØ¯
                                    </button>
                                </div>

                                <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 mt-8">
                                    {filteredCourses.map((course, index) => (
                                        <div
                                            key={course.id}
                                            className={`material-card ${draggedCourseIndex === index ? 'dragging' : ''}`}
                                            draggable
                                            onDragStart={(e) => handleCourseDragStart(e, index)}
                                            onDragOver={handleCourseDragOver}
                                            onDrop={(e) => handleCourseDrop(e, index)}
                                            onDragLeave={(e) => e.currentTarget.classList.remove('drag-over')}
                                            onDragEnter={(e) => {
                                                if (draggedCourseIndex !== null && draggedCourseIndex !== index) {
                                                    e.currentTarget.classList.add('drag-over')
                                                }
                                            }}
                                            onClick={(e) => {
                                                if (!e.target.closest('.card-actions') && !e.target.closest('.course-drag-handle')) {
                                                    openDetail(course.id)
                                                }
                                            }}
                                        >
                                            <i className="fa-solid fa-grip-vertical course-drag-handle absolute top-2.5 right-2.5 opacity-0 hover:opacity-100 cursor-grab text-[var(--text-secondary)] z-10 transition-opacity"></i>
                                            
                                            <div className="card-actions absolute top-2.5 left-2.5 flex gap-1 opacity-0 hover:opacity-100 z-10 transition-opacity">
                                                <button className="action-btn" onClick={(e) => { e.stopPropagation(); openEditCourseModal(course.id) }} title="ØªØ¹Ø¯ÙŠÙ„">
                                                    <i className="fa-solid fa-pen"></i>
                                                </button>
                                                <button className="action-btn delete" onClick={(e) => { e.stopPropagation(); deleteCourse(course.id) }} title="Ø­Ø°Ù">
                                                    <i className="fa-solid fa-trash"></i>
                                                </button>
                                            </div>
                                            
                                            <div className="w-16 h-16 bg-gradient-to-br from-[var(--bg-body)] to-white text-[var(--primary)] rounded-xl flex items-center justify-center text-3xl mx-auto mb-4 border-2 border-[var(--border-color)] overflow-hidden transition-colors hover:bg-[var(--primary)] hover:text-white hover:border-[var(--primary)]">
                                                {course.icon.startsWith('data:image') ? (
                                                    <img src={course.icon} alt={course.title} className="w-full h-full object-cover" />
                                                ) : (
                                                    <i className={`fa-solid ${course.icon}`}></i>
                                                )}
                                            </div>
                                            <div className="font-bold text-lg text-[var(--text-primary)]">{course.title}</div>
                                            <div className="text-sm text-[var(--text-secondary)]">{course.doc}</div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}

                        {/* Detail View */}
                        {view === 'detail' && currentCourse && (
                            <div className="w-full">
                                <button className="bg-[var(--bg-card)] border border-[var(--border-color)] text-[var(--text-secondary)] px-4 py-2 rounded-lg cursor-pointer font-semibold flex items-center gap-2 mb-6 hover:bg-[var(--primary)] hover:text-white hover:border-[var(--primary)] transition-all" onClick={showHome}>
                                    <i className="fa-solid fa-arrow-right"></i> Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©
                                </button>
                                
                                {/* Making the header card also slightly wider or centered if preferred, but keeping it centered is usually better for aesthetics */}
                                <div className="max-w-4xl mx-auto bg-[var(--bg-card)] p-8 rounded-2xl shadow-sm text-center border border-[var(--border-color)] mb-8">
                                    <div className="w-20 h-20 bg-[var(--bg-body)] rounded-full flex items-center justify-center text-4xl text-[var(--accent)] mx-auto mb-4 border-4 border-[var(--accent)] overflow-hidden">
                                        {currentCourse.icon.startsWith('data:image') ? (
                                            <img src={currentCourse.icon} alt={currentCourse.title} className="w-full h-full object-cover" />
                                        ) : (
                                            <i className={`fa-solid ${currentCourse.icon}`}></i>
                                        )}
                                    </div>
                                    <h2 className="text-3xl font-extrabold text-[var(--primary-dark)] mb-1">{currentCourse.title}</h2>
                                    <p className="text-lg text-[var(--text-secondary)] mb-6">{currentCourse.doc}</p>
                                    
                                    <div className="flex justify-center gap-3 flex-wrap">
                                        <button className="bg-[var(--text-secondary)] text-white border-none px-4 py-2 rounded-lg cursor-pointer flex items-center gap-2 hover:opacity-90" onClick={() => openEditCourseModal(currentCourse.id)}>
                                            <i className="fa-solid fa-pen"></i> ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù‚Ø±Ø±
                                        </button>
                                        <button className="bg-[var(--accent)] text-white border-none px-4 py-2 rounded-lg cursor-pointer flex items-center gap-2 hover:opacity-90" onClick={openLinkModal}>
                                            <i className="fa-solid fa-plus"></i> Ø¥Ø¶Ø§ÙØ© Ø±Ø§Ø¨Ø· / Ù‚Ø³Ù…
                                        </button>
                                    </div>
                                </div>

                                {/* This container now inherits w-full from main, so it fills the screen */}
                                <div className="w-full">
                                    {currentCourse.sections.length === 0 ? (
                                        <div className="text-center text-[var(--text-secondary)] py-8">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ù‚Ø³Ø§Ù… Ø£Ùˆ Ø±ÙˆØ§Ø¨Ø· Ù…Ø¶Ø§ÙØ©. Ø§Ø¶ØºØ· "Ø¥Ø¶Ø§ÙØ© Ø±Ø§Ø¨Ø·".</div>
                                    ) : (
                                        currentCourse.sections.map((section, sIndex) => (
                                            <div
                                                key={sIndex}
                                                className={`bg-[var(--bg-card)] rounded-xl border border-[var(--border-color)] overflow-hidden shadow-sm mb-6 ${draggedSectionIndex === sIndex ? 'dragging' : ''}`}
                                                draggable
                                                onDragStart={(e) => handleSectionDragStart(e, sIndex)}
                                                onDragOver={handleSectionDragOver}
                                                onDrop={(e) => handleSectionDrop(e, sIndex)}
                                                onDragLeave={(e) => e.currentTarget.classList.remove('drag-over')}
                                                onDragEnter={(e) => { if (draggedSectionIndex !== null && draggedSectionIndex !== sIndex) e.currentTarget.classList.add('drag-over') }}
                                            >
                                                <div className="bg-[var(--bg-body)] p-3 border-b border-[var(--border-color)] flex justify-between items-center flex-wrap gap-2 cursor-grab active:cursor-grabbing">
                                                    <div className="flex items-center gap-3 flex-1 min-w-0">
                                                        <i className="fa-solid fa-grip-vertical text-[var(--text-secondary)] cursor-grab hover:text-[var(--primary)]"></i>
                                                        <span className="font-bold text-[var(--primary)] text-lg truncate flex-1">{section.name}</span>
                                                        {section.badge && <span className="text-[0.7rem] bg-[var(--accent)] text-white px-2 py-0.5 rounded">{section.badge}</span>}
                                                    </div>
                                                    <div className="flex gap-2">
                                                        <button className="action-btn" onClick={() => editSectionName(currentCourse.id, sIndex)} title="ØªØ¹Ø¯ÙŠÙ„ Ø§Ø³Ù… Ø§Ù„Ø®Ø§Ù†Ø©"><i className="fa-solid fa-pen"></i></button>
                                                        <button className="action-btn delete" onClick={() => deleteSection(currentCourse.id, sIndex)} title="Ø­Ø°Ù Ø§Ù„Ø®Ø§Ù†Ø©"><i className="fa-solid fa-trash"></i></button>
                                                    </div>
                                                </div>
                                                <ul className="list-none p-0">
                                                    {section.links.map((link, lIndex) => (
                                                        <li
                                                            key={lIndex}
                                                            className={`track-item ${draggedLinkInfo?.sectionIndex === sIndex && draggedLinkInfo?.linkIndex === lIndex ? 'dragging' : ''}`}
                                                            draggable
                                                            onDragStart={(e) => handleLinkDragStart(e, sIndex, lIndex)}
                                                            onDragOver={handleLinkDragOver}
                                                            onDrop={(e) => handleLinkDrop(e, sIndex, lIndex)}
                                                            onDragLeave={(e) => e.currentTarget.classList.remove('drag-over')}
                                                            onDragEnter={(e) => { if (draggedLinkInfo && (draggedLinkInfo.sectionIndex !== sIndex || draggedLinkInfo.linkIndex !== lIndex)) e.currentTarget.classList.add('drag-over') }}
                                                        >
                                                            <i className="fa-solid fa-grip-vertical text-[var(--text-secondary)] ml-3 cursor-grab hover:text-[var(--primary)]"></i>
                                                            <div className="text-[var(--text-secondary)] ml-3"><i className="fa-solid fa-link"></i></div>
                                                            <div className="flex-grow overflow-hidden" onClick={() => window.open(link.url, '_blank')}>
                                                                <span className="font-semibold text-sm truncate block">{link.name}</span>
                                                            </div>
                                                            <i className="fa-solid fa-play text-[var(--primary)] text-xs opacity-0 hover:opacity-100 transition-opacity flex-shrink-0"></i>
                                                            <button className="bg-transparent border-none text-[var(--text-secondary)] cursor-pointer ml-3 hover:text-[var(--primary)] transition-colors flex-shrink-0" onClick={() => openEditLinkModal(currentCourse.id, sIndex, lIndex)} title="ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø±Ø§Ø¨Ø·"><i className="fa-solid fa-pen"></i></button>
                                                            <button className="bg-transparent border-none text-[var(--text-secondary)] cursor-pointer ml-3 hover:text-[var(--danger)] transition-colors flex-shrink-0" onClick={() => deleteLink(currentCourse.id, sIndex, lIndex)} title="Ø­Ø°Ù Ø§Ù„Ø±Ø§Ø¨Ø·"><i className="fa-solid fa-trash"></i></button>
                                                        </li>
                                                    ))}
                                                </ul>
                                            </div>
                                        ))
                                    )}
                                </div>
                            </div>
                        )}
                    </main>

                    <footer className="text-center py-8 text-[var(--text-secondary)] text-sm border-t border-[var(--border-color)]">
                        <p>Â© 2026 CCE Hub. Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…ÙˆØ­Ø¯.</p>
                    </footer>

                    {/* Modals (Dialogs) */}
                    {courseModalOpen && (
                        <div className="modal-backdrop" role="dialog" onClick={() => setCourseModalOpen(false)}>
                            <div onClick={e => e.stopPropagation()}>
                                <h2 className="text-2xl font-bold text-[var(--primary-dark)] mb-6 text-center">
                                    {editingCourseId ? 'ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù‚Ø±Ø±' : 'Ø¥Ø¶Ø§ÙØ© Ù…Ù‚Ø±Ø± Ø¬Ø¯ÙŠØ¯'}
                                </h2>
                                
                                <div className="mb-6">
                                    <label className="block mb-2 font-bold text-[var(--text-primary)]">Ø§Ø³Ù… Ø§Ù„Ù…Ù‚Ø±Ø±</label>
                                    <input
                                        className="form-input"
                                        value={courseName}
                                        onChange={(e) => setCourseName(e.target.value)}
                                        placeholder="Ù…Ø«Ø§Ù„: ÙÙŠØ²ÙŠØ§Ø¡ Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„ØµÙ„Ø¨Ø©"
                                    />
                                </div>
                                
                                <div className="mb-6">
                                    <label className="block mb-2 font-bold text-[var(--text-primary)]">Ø§Ø³Ù… Ø§Ù„Ø¯ÙƒØªÙˆØ± / Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©</label>
                                    <input
                                        className="form-input"
                                        value={courseDoc}
                                        onChange={(e) => setCourseDoc(e.target.value)}
                                        placeholder="Ù…Ø«Ø§Ù„: Ø¯ÙƒØªÙˆØ± ÙÙ„Ø§Ù†"
                                    />
                                </div>
                                
                                <div className="mb-6">
                                    <label className="block mb-2 font-bold text-[var(--text-primary)]">Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…Ù‚Ø±Ø± (Ø§Ø®ØªÙŠØ§Ø±ÙŠ - PNG)</label>
                                    <div className="flex items-center gap-4 flex-wrap">
                                        <button
                                            type="button"
                                            className="bg-[var(--bg-body)] text-[var(--text-primary)] border-2 border-dashed border-[var(--border-color)] px-4 py-3 rounded-lg cursor-pointer font-bold hover:border-[var(--primary)] hover:text-[var(--primary)] transition-colors flex items-center gap-2"
                                            onClick={() => fileInputRef.current?.click()}
                                        >
                                            <i className="fa-solid fa-image"></i> Ø±ÙØ¹ ØµÙˆØ±Ø©
                                        </button>
                                        {currentIconBase64 && (
                                            <div className="w-16 h-16 rounded-full overflow-hidden border-2 border-[var(--border-color)] flex-shrink-0">
                                                <img src={currentIconBase64} alt="Preview" className="w-full h-full object-cover" />
                                            </div>
                                        )}
                                        {editingCourseId && !currentIconBase64 && currentCourse?.icon.startsWith('data:image') && (
                                            <div className="w-16 h-16 rounded-full overflow-hidden border-2 border-[var(--border-color)] flex-shrink-0">
                                                <img src={currentCourse.icon} alt="Current" className="w-full h-full object-cover" />
                                            </div>
                                        )}
                                        <input
                                            ref={fileInputRef}
                                            type="file"
                                            accept="image/png"
                                            onChange={handleImageUpload}
                                            style={{ display: 'none' }}
                                        />
                                    </div>
                                </div>

                                <div className="mt-8 pt-4 border-t border-[var(--border-color)] flex justify-end gap-3 flex-wrap">
                                    {editingCourseId && (
                                        <button
                                            className="btn-delete"
                                            onClick={() => {
                                                if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù‚Ø±Ø± ÙˆØ¬Ù…ÙŠØ¹ Ù…Ø­ØªÙˆÙŠØ§ØªÙ‡ØŸ')) {
                                                    deleteCourse(editingCourseId)
                                                    setCourseModalOpen(false)
                                                    showHome()
                                                }
                                            }}
                                        >
                                            Ø­Ø°Ù Ø§Ù„Ù…Ù‚Ø±Ø±
                                        </button>
                                    )}
                                    <div className="flex-grow"></div>
                                    <button className="btn-cancel" onClick={() => setCourseModalOpen(false)}>Ø¥Ù„ØºØ§Ø¡</button>
                                    <button className="btn-save" onClick={saveCourseData}>Ø­ÙØ¸</button>
                                </div>
                            </div>
                        </div>
                    )}

                    {linkModalOpen && (
                        <div className="modal-backdrop" role="dialog" onClick={() => setLinkModalOpen(false)}>
                            <div onClick={e => e.stopPropagation()}>
                                <h2 className="text-2xl font-bold text-[var(--primary-dark)] mb-6 text-center">Ø¥Ø¶Ø§ÙØ© Ø±Ø§Ø¨Ø· Ù„Ù„Ù…Ù‚Ø±Ø±</h2>
                                
                                <div className="mb-6">
                                    <label className="block mb-2 font-bold text-[var(--text-primary)]">Ø§Ø³Ù… Ø§Ù„Ø±Ø§Ø¨Ø· / Ø§Ù„Ù‚Ø³Ù…</label>
                                    <input
                                        className="form-input"
                                        value={linkName}
                                        onChange={(e) => setLinkName(e.target.value)}
                                        placeholder="Ù…Ø«Ø§Ù„: Ø´Ø§Ø¨ØªØ± 1ØŒ Ø´Ø±Ø­ ÙƒØ§Ù…Ù„"
                                    />
                                </div>
                                
                                <div className="mb-6">
                                    <label className="block mb-2 font-bold text-[var(--text-primary)]">Ø§Ù„Ø±Ø§Ø¨Ø·</label>
                                    <input
                                        className="form-input"
                                        value={linkUrl}
                                        onChange={(e) => setLinkUrl(e.target.value)}
                                        placeholder="https://..."
                                    />
                                </div>

                                <div className="mt-8 pt-4 border-t border-[var(--border-color)] flex justify-end gap-3">
                                    <button className="btn-cancel" onClick={() => setLinkModalOpen(false)}>Ø¥Ù„ØºØ§Ø¡</button>
                                    <button className="btn-save" onClick={saveLinkData}>Ø­ÙØ¸ Ø§Ù„Ø±Ø§Ø¨Ø·</button>
                                </div>
                            </div>
                        </div>
                    )}

                    {editLinkModalOpen && (
                        <div className="modal-backdrop" role="dialog" onClick={() => setEditLinkModalOpen(false)}>
                            <div onClick={e => e.stopPropagation()}>
                                <h2 className="text-2xl font-bold text-[var(--primary-dark)] mb-6 text-center">ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø±Ø§Ø¨Ø·</h2>
                                
                                <div className="mb-6">
                                    <label className="block mb-2 font-bold text-[var(--text-primary)]">Ø§Ø³Ù… Ø§Ù„Ø±Ø§Ø¨Ø·</label>
                                    <input
                                        className="form-input"
                                        value={editLinkName}
                                        onChange={(e) => setEditLinkName(e.target.value)}
                                        placeholder="Ø§Ø³Ù… Ø§Ù„Ø±Ø§Ø¨Ø·"
                                    />
                                </div>
                                
                                <div className="mb-6">
                                    <label className="block mb-2 font-bold text-[var(--text-primary)]">Ø§Ù„Ø±Ø§Ø¨Ø·</label>
                                    <input
                                        className="form-input"
                                        value={editLinkUrl}
                                        onChange={(e) => setEditLinkUrl(e.target.value)}
                                        placeholder="https://..."
                                    />
                                </div>

                                <div className="mt-8 pt-4 border-t border-[var(--border-color)] flex justify-end gap-3">
                                    <button className="btn-cancel" onClick={() => setEditLinkModalOpen(false)}>Ø¥Ù„ØºØ§Ø¡</button>
                                    <button className="btn-save" onClick={saveEditedLink}>Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª</button>
                                </div>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<CCEHub />);
    </script>
</body>
</html>
